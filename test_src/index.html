<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>File Upload</title>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
    <div id="app">
        {{ info }}
        <div v-for="item in info">
            <div v-bind:style="{ marginBottom: '10', marginTop: '10', height: '100px', backgroundColor: item, padding: '15px'}">
                {{ item }}
            </div>
        </div>
        <div>
            <button @click="submit"> Fetch Information </button>
        </div>
        <div style="margin-top: 40px;">
            <button @click="getSunsetColors"> Read From Sunset Pictures </button>
        </div>
        <div style="margin-top: 40px;">
            <div> {{ matrix }} </div>
        </div>
    </div>

    <script>
        
        

        new Vue ({
            el: '#app',
            data () {
                return {
                    info: "",
                    divStyle: {
                        marginBottom: '10',
                        marginTop: '10',
                        height: '100px',
                        backgroundColor: 'red'
                    },
                    query: "cats",
                    matrix: "",
                }
            },
            methods: {
                submit: function(){
                    // then scrapes
                    axios.get('/showImages', { useCredentials: true }).then(() => {
                        console.log("fetched");
                    }).catch((e) => {
                        console.log(e);
                    })
                },

                getSunsetColors: function(){
                    //console.log("success");
                    axios.get("/processImages", {useCredentials: true}).then((resp) => {
                        console.log("data: " + resp.data);
                    }).catch((e) => {
                        console.log(e);
                    })
                },

            },
            mounted () {
                //make a get request to the server to get the colors
                axios.get('/getColors',{ useCredentials: true}).then((resp) => {
                    //console.log(typeof(resp.data))
                    this.info = resp.data;
                }).catch((e) => {
                    console.log(e)
                })
            }
        })
    </script>
</body>
</html>